#include <reg51.h>

sbit Y1=P1^0;			//∞¥º¸1
sbit Y2=P1^1;			//∞¥º¸2
sbit Y3=P1^2;			//∞¥º¸3
sbit Y4=P1^3;			//∞¥º¸4



sbit Speaker=P3^7;	   //—Ô…˘∆˜
static unsigned char bdata StateREG;
sbit m=StateREG^0;
unsigned char code * data Mymusic;
unsigned char data l;

void delay(void);	  //—” ±∫Ø ˝…˘√˜

unsigned char code music[30]={0xFF,0xFF,0xFB,0x90,0xFC,0x0C,0xFC,0x44,0xFC,0xAC,0xFD,0x09,0xFD,0x34,0xFD,0x82,0xFD,0xC8,0xFE,0x06,0xFE,0x22,0xFA,0X15,0XFB,0x04,0xFA,0x67,0xFE,0x85};
//“Ù¿÷1
unsigned char code Mmusic11[97]={0x34,0x32,0x32,0x34,0x42,0x51,			
                             0x62,0x52,0x42,0x32,0x34,0x04,
							 0x74,0x74,0x62,0x62,0x64,
							 0x3c,0x04,
							 0x64,0x62,0x52,0x42,0x32,0x34,
							 0x33,0x31,0x32,0x72,0x76,0x72,
							 0x83,0x81,0x82,0x82,0x82,0x74,0x72,
							 0x7c,0x04,
							 0x63,0x61,0x62,0x62,0x64,0x72,0x82,
							 0x72,0x74,0x72,0x62,0x52,0x42,0x32,
							 0x42,0x44,0x42,0x42,0x52,0x62,0x52,
							 0x5c,0x04,
							 0x64,0x62,0x62,0x64,0x72,0x82,
							 0x72,0x74,0x72,0x62,0x52,0x42,0x32,
							 0x42,0x46,0x53,0x41,0x42,0x32,
							 0x3c,0x04,
							 0x44,0x48,0x02,0x32,
							 0x3f,
							 0x44,0x48,0x02,0x32,
							 0x3f,
							 0x34,0x0c,
                             0xFF};
//“Ù¿÷2
unsigned char code Mmusic12[46]={0x12,0x52,0x52,0x52,0x56,0x42,		
                             0x32,0x42,0x32,0x22,0x18,
							 0x82,0x82,0x82,0x82,0x86,0x72,
							 0xB2,0x72,0x72,0x62,0x58,
							 0x52,0x82,0x82,0x72,0x56,0x42,
							 0x32,0x42,0x32,0x22,0x16,0xB2,
							 0xB2,0x32,0x32,0x22,0x16,0x52,
							 0x42,0x32,0x22,0xC2,0x88,
							 0xFF};	
//“Ù¿÷3								 
unsigned char code Mmusic13[131]={0x52,0x42,
                             0x58,0x02,0x42,0x52,0x42,
                             0x38,0x04,0x12,0x32,
                             0x44,0x42,0x52,0x42,0x32,0x12,0x12,
                             0xC8,0x04,0x52,0x42,
                             0x58,0x02,0x42,0x52,0x42,
                             0x38,0x04,0x12,0x32,
                             0x44,0x42,0x52,0x42,0x32,0x12,0x32,
                             0x48,0x04,0x52,0x42,
                             0x58,0x02,0x42,0x52,0x42,
                             0x38,0x04,0x12,0x32,
                             0x44,0x42,0x52,0x42,0x32,0x12,0x11,0x31,
                             0xC8,0x04,0x52,0x72,
                             0x78,0x02,0x72,0x82,0x72,
                             0x58,0x04,0x42,0x42,
                             0x44,0x42,0x52,0x42,0x32,0x12,0x12,
                             0x32,0x32,0x3C,
                             0x09,0x72,0x72,0x82,
                             0xA2,0x92,0x92,0x82,0x52,0x42,0x42,0x42,
                             0x58,0x02,0x52,0x52,0x72,
                             0x84,0x84,0x02,0x12,0x52,0x42,
                             0x48,0x04,0x52,0x72,
                             0x72,0x52,0x74,0x02,0xA4,0x92,
                             0x82,0x92,0x54,0x02,0x82,0x82,0x92,
                             0x82,0x72,0x52,0x42,0x02,0xC4,0x12,
                             0x3C,
							 0xFF};
//“Ù¿÷4
unsigned char code Mmusic14[37]={0xC4,0x12,0x32,0x44,0x42,0x52,		   
                             0x52,0x44,0x32,0x32,0x12,0x14,
                             0x12,0x12,0x32,0x42,0x54,0x44,
                             0x4F,
                             0xC4,0x12,0x32,0x44,0x42,0x72,
                             0x58,0x42,0x32,0x34,
                             0x14,0x12,0x32,0x34,0x32,0x12,
                             0x1F,
							 0xFF};
//“Ù¿÷5
unsigned char code Mmusic15[144]={0x52,0x62,						  
                             0x74,0x74,0x74,0x34,
                             0x42,0x34,0x52,0x56,0x42,
                             0x34,0x34,0x14,0x32,0x12,
                             0x12,0xC2,0xC4,0x04,0x52,0x62,
                             0x74,0x74,0x74,0x34,
                             0x42,0x34,0x52,0x56,0x42,
                             0x34,0x32,0x12,0x12,0x34,0x42,
                             0x4C,0x52,0x42,
                             0x34,0x32,0x42,0x32,0x12,0x12,0xC2,
                             0xC2,0x54,0x52,0x54,0x52,0x52,
                             0x42,0x32,0x32,0x12,0x32,0x42,0x32,0x52,
                             0x5C,0x52,0x42,
                             0x34,0x32,0x42,0x32,0x12,0x12,0xC2,
                             0xC2,0x54,0x52,0x54,0x02,0x52,
                             0x52,0x42,0x32,0x12,0x32,0x84,0x72,
                             0x7F,
                             0x0F,
                             0x74,0x72,0x52,0x54,0x74,
                             0x82,0x52,0x52,0x72,0x78,
                             0x34,0x32,0x32,0x42,0x54,0x72,
                             0x7F,
                             0x86,0x82,0x72,0x52,0x54,
                             0x72,0x84,0x32,0x36,0x52,
                             0x42,0x52,0x42,0x32,0x34,0x12,0x32,
                             0x32,0x42,0x4C,
                             0x86,0x82,0x72,0x52,0x54,
                             0x72,0x84,0x52,0x56,0x52,
                             0x42,0x52,0x72,0x82,0x52,0x34,0x12,
                             0x12,0x32,0x3C,
                             0xFF};	
//“Ù¿÷6					   
unsigned char code Mmusic16[85]={									   
0x04,0x24,0x14,0xC4,
0x54,0x54,0x48,
0x04,0x54,0x44,0x34,
0x22,0x14,0xB2,0xC8,
0x04,0x12,0xC2,0x16,0x12,
0x76,0x52,0x46,0x12,
0x3F,
0x04,0xB4,0xD4,0xC4,
0x14,0x28,0xC4,
0x14,0x12,0x32,0x16,0xC2,
0x54,0x78,0x34,
0x4C,0x42,0x52,
0x86,0x72,0x76,0x52,
0x74,0x28,0x42,0x52,
0x46,0x12,0x26,0x12,
0xCF,
0x04,0x24,0x14,0xC4,
0x56,0x52,0x48,
0x04,0x54,0x44,0x34,
0x22,0x14,0xB2,0xC8,
0x04,0x34,0x14,0xC4,
0x12,0x32,0x18,0x42,0x42,
0x74,0x58,0x44,
0x3F,
0xFF};
//“Ù¿÷7
unsigned char code Mmusic17[138]={0xC2,0xC2,0x12,
                             0x34,0x32,0x32,0x32,0x12,0x12,0x52,
                             0x54,0x02,0xC2,0x12,
                             0x32,0x32,0x32,0x32,0x34,0x52,0x72,
                             0x7C,0x02,0x72,
                             0x82,0x72,0x82,0x72,0x84,0x72,0x41,0x51,
       						 0x52,0x41,0x31,0x34,0x02,0x32,0x32,0x12,
							 0x34,0x32,0x12,0x32,0x54,0x42,
							 0x32,0x32,0x32,0x32,0x34,0x52,0x72,
                             0x7C,0x72,0x72,
                             0x82,0x72,0x82,0x72,0x84,0x82,0x72,
                             0x42,0x52,0x42,0x34,0x12,0x12,0x32,
                             0xC4,0x52,0x42,0x34,0x12,0x12,
                             0x31,0x41,0x32,0x3C,
                             0x0A,0x72,0x82,0xA2,
                             0x84,0x82,0x72,0x82,0x72,0x52,0x72,
                             0x78,0x02,0x72,0x82,0xA2,
                             0x84,0x82,0x72,0x82,0x72,0x82,0x32,
                             0x38,0x02,0x32,0x42,0x52,
                             0x64,0x62,0x72,0x82,0x82,0x72,0x82,
                             0x82,0xA2,0x82,0x82,0x82,0xA2,0x82,0x72,
                             0x78,0x72,0x32,0x82,0x72,
                             0x78,0x72,0x82,0xA3,0x51,
                             0x42,0x51,0x41,0x3C,
                             0xFF};
//“Ù¿÷8
unsigned char code Mmusic18[77]={0xC2,0xC2,0x34,0x42,0x42,
                             0x52,0x41,0x51,0x5C,
                             0x04,0xC2,0xC2,0x34,0x42,0x42,
                             0x52,0x31,0x41,0x4C,
                             0x04,0xC2,0xC2,0x34,0x42,0x42,
                             0x52,0x41,0x51,0x58,0x32,0x52,
                             0x4C,0x42,0x32,
                             0x34,0x32,0x42,0x48,
                             0x04,0xC2,0xC2,0x34,0x42,0x42,
                             0x72,0x41,0x51,0x5C,
                             0x04,0xC2,0xC2,0x32,0x32,0x42,0x42,
                             0x52,0x42,0x4C,
                             0x04,0xC2,0xC2,0x34,0x42,0x42,
                             0x52,0x41,0x51,0x58,0x32,0x52,
                             0x4C,0x42,0x32,
                             0x32,0x42,0x4C,
							 0xFF};
//“Ù¿÷9
unsigned char code Mmusic19[]={
0X54,0XC4,0X12,0X32,0X34,
0X52,0X52,0X52,0X52,0X42,0X32,0X34,
0XC1,0XC2,0X52,0XC2,0X12,0X32,0X34,
0X11,0X12,0X31,0X12,0XC2,
0X78,0X72,0X52,0X52,0X42,
0X32,0X42,0X52,0X11,0XC1,0XC4,0XC1,0XC1,0XC1,0XC1,
0X12,0X32,0X32,0X12,0X42,0X42,0X44,
0XC2,0X12,0X32,0X42,0X52,0X72,0X72,0X82,
0X41,0X51,0X42,0X48,0X42,0X12,
0X3C,0X72,0X62,
0X3C,0X72,0X62,
0X3C,0X72,0X62,
0x21,0x31,0x41,0x51,0x61,0x71,0x81,0x91,0x61,0x71,0x81,0x91,
0X3F,
0X3F,
0X54,0XC2,0XC2,0X42,0XC2,0XC4,
0X34,0X32,0X42,0X52,0XC2,0XC4,
0XD2,0XC2,0X12,0X22,0X38,
0X12,0X22,0X32,0X42,0X48,
0xFF};
//“Ù¿÷10
unsigned char code Mmusic110[]={
0x32,0x31,0x41,
0x52,0x52,0x42,0x31,0x41,0x44,0x31,0x41,
0x52,0x52,0x42,0x32,0x34,0x71,0x11,
0x74,0x71,0x71,0x11,0x31,0x34,0x32,
0x32,0x32,0x32,0x31,0x41,0x44,0x32,0x41,0x51,
0x52,0x52,0x72,0x81,0x41,0x44,0x52,0x41,0x31,
0x32,0x32,0x42,0x51,0x71,0x74,0x71,0x71,
0x12,0x31,0x31,0x31,0x52,0x42,0x32,0x32,0x41,0x31,
0x34,0x52,0x51,0x71,
0x72,0x71,0x71,0x72,0x71,0x81,0x84,0x52,0x42,
0x32,0x32,0x32,0x41,0x51,0x54,0x51,0x71,
0x72,0x72,0x72,0x81,0xA1,0xA2,0x82,0x72,0x52,
0x42,0x32,0x32,0x12,0x44,0x51,0x71,
0x72,0x72,0x71,0x82,0x71,0x84,0x52,0x42,
0x32,0x32,0x32,0x41,0x51,0x54,0x51,0x71,
0x72,0x72,0x72,0x81,0xA1,0xA2,0x82,0x72,0x51,0x41,
0x42,0x42,0x44,0x32,0x51,0x61,
0x72,0x42,0x44,0x52,0x41,0x31,
0x34,0x52,0x41,0x31,0x34,0x52,0x42,
0x52,0x32,0x52,0x81,0x71,0x74,0x51,0x71,
0x82,0x81,0x71,0x72,0x81,0x71,0x74,0x51,0x41,0x31,
0x42,0x41,0x51,0x42,0x31,0x41,0x44,0x52,0x41,0x31,
0x34,0x52,0x41,0x31,0x34,0x52,0x42,
0x52,0x32,0x52,0x81,0x71,0x74,0x51,0x41,
0x82,0x82,0xA2,0x71,0x81,0x72,0x71,0x51,0x41,0x31,
0x44,0x41,0x31,0x41,0x51,0x44,0x52,0x52,
0x42,0x31,0x34,0x52,0x41,0x31,
0x42,0x31,0x34,
0xFF};
//“Ù¿÷11						    
unsigned char code Mmusic111[]={
0XC2,0XB2,
0X36,0X52,0X42,0X32,0X11,0XC1,0XB2,
0XC6,0X12,0XC4,0X12,0XC2,
0X76,0XA2,0X82,0X72,0X51,0X41,0X32,
0X4C,0X42,0X32,
0X74,0X82,0X74,0X82,0X72,
0X52,0X41,0X38,0X32,0X42,
0X16,0XC2,0X72,0X52,0X42,0X42,
0X3C,0XC2,0XB2,
0X36,0X52,0X42,0X32,0X11,0XC1,0XB2,
0XC6,0X12,0XC4,0X12,0XC2,
0X76,0XA2,0X82,0X72,0X51,0X41,0X32,
0X4C,0X42,0X32,
0X76,0X82,0X74,0X82,0X72,
0X53,0X41,0X38,0X32,0X42,
0X16,0XC2,0X72,0X52,0X41,0X51,0X12,
0XCC,0XC2,0XB2,
0X16,0XC2,0X72,0X52,0X42,0X42,
0X3C,0X32,0X32,
0X26,0X22,0X24,0X42,0X32,
0x22,0x12,0x18,0x02,0x52,
0X46,0X12,0X44,0X72,0X82,
0X5C,0X52,0X52,
0X46,0X42,0X74,0X42,0X32,
0X36,0X42,0X58,
0X82,0X72,0X62,0X52,0X46,0X32,
0X3C,0X12,0XB2,
0X36,0X52,0X42,0X32,0X11,0XC1,0XB2,
0XC6,0X12,0XC4,0X12,0XC2,
0X76,0XA2,0X82,0X72,0X51,0X41,0X32,
0X48,0X02,0X42,0X52,0X62,
0X76,0X82,0X74,0X82,0X72,
0X56,0X41,0X38,0X32,0X22,
0X16,0XC2,0X72,0X52,0X42,0X42,
0X3C,0X04,0X04,0X04,0X04,
0xFF};
//“Ù¿÷12
unsigned char code Mmusic112[]={
0x34,0x32,0x34,0x34,0x24,0x34,0x32,0x32,0x24,0x38,0x44,0x58,0x48,
0x34,0x32,0x34,0x34,0x24,0x38,0x34,0x7F,0x34,0x32,0x34,0x32,
0x24,0x38,0x34,0x24,0x38,0x44,0x58,0x48,0x34,0x32,0x34,0x34,
0x24,0x38,0x34,0x7F,0x16,0x4C,0x74,
0x78,0x64,0x54,0x48,0x54,0x64,0x58,0x44,0x34,0x24,0x38,0x24,
0x14,0x12,0x21,0x11,0x78,0x68,0x3F,0x4C,0x74,
0x78,0x64,0x52,0x42,0x48,0x54,0x64,0x58,0x44,0x34,0x24,0x38,0x24,
0x24,0x38,0x44,0x58,0x48,0x3C,
0xFF};

//÷˜≥Ã–Ú
void main()
{
	unsigned int data j;
	unsigned char data i;
	unsigned char data k;
	unsigned char data p11;
	unsigned char data p33;
    TMOD=0x01;							//≥ı ºªØ
    IE=0x82;
	while(1)
	{
	j=0;
	m=0;
	while(m==0)
	{if(Y1==1 & Y2==0 & Y3==0 & Y4==0)		//≤•∑≈“Ù¿÷1
	{
	   Mymusic=Mmusic11;
	   m=1;
	}
	if(Y1==0 & Y2==1 & Y3==0 & Y4==0)		//≤•∑≈“Ù¿÷2
	{
	   Mymusic=Mmusic12;
	   m=1;
	}
	if(Y1==1 & Y2==1 & Y3==0 & Y4==0)	   //≤•∑≈“Ù¿÷3
	{
	   Mymusic=Mmusic13;
	   m=1;
	}
	if(Y1==0 & Y2==0 & Y3==1 & Y4==0)	  //≤•∑≈“Ù¿÷4
	{
	   Mymusic=Mmusic14;
	   m=1;
	}
	if(Y1==1 & Y2==0 & Y3==1 & Y4==0)	 //≤•∑≈“Ù¿÷5
	{
	   Mymusic=Mmusic15;
	   m=1;
	}
	if(Y1==0 & Y2==1 & Y3==1 & Y4==0)	//≤•∑≈“Ù¿÷6
	{
	   Mymusic=Mmusic16;
	   m=1;
	}
	if(Y1==1 & Y2==1 & Y3==1 & Y4==0)	  //≤•∑≈“Ù¿÷7
	{
	   Mymusic=Mmusic17;
	   m=1;
	}
	if(Y1==0 & Y2==0 & Y3==0 & Y4==1)	  //≤•∑≈“Ù¿÷8
	{
	   Mymusic=Mmusic18;
	   m=1;
	}
	if(Y1==1 & Y2==0 & Y3==0 & Y4==1)	  //≤•∑≈“Ù¿÷9
	{
	   Mymusic=Mmusic19;
	   m=1;
	}
	if(Y1==0 & Y2==1 & Y3==0 & Y4==1)	  //≤•∑≈“Ù¿÷10
	{
	   Mymusic=Mmusic110;
	   m=1;
	}
	if(Y1==1 & Y2==1 & Y3==0 & Y4==1)	  //≤•∑≈“Ù¿÷11
	{
	   Mymusic=Mmusic111;
	   m=1;
	}
	if(Y1==0 & Y2==0 & Y3==1 & Y4==1)	 //≤•∑≈“Ù¿÷12
	{
	   Mymusic=Mmusic112;
	   m=1;
	}
	}
	for(i=0;i<5;i++)
	{
	  delay(); 								//—” ±
	}
    p11=P1;
	p33=P3;
    while(*(Mymusic+j)!=0xFF)
    { 
	   k=*(Mymusic+j)&0x0F;
	   l=*(Mymusic+j)>>4;
       if((p11!=P1)||((p33&0x0f)!=(P3&0x0f)))
	      {
		    goto Next;
          }
 	   TH0=music[2*l];
       TL0=music[2*l+1];
	   TR0=1;
	   if ((music[2*l]==0xff)&&(music[2*l+1]==0xff)) 
           {
		       TR0=0;
			}
       for(i=k;i>0;--i)
	       {
		       delay();
	       } 
	   TR0=0;
       j++;
    }
Next: ;
	}
}

/*µ•∏ˆ“Ù∑˚µƒ∑¢…˘*/
void timer0() interrupt 1 using 1 
{ 
     TH0=music[2*l];
     TL0=music[2*l+1];
     Speaker = !Speaker; 
}

/*ª„±‡”Ôæ‰Ω¯––æ´»∑—” ±£¨—” ±1/4≈ƒ ±º‰º¥187ms*/
void delay(void)
{
     int i=10000;
	 while(i--)	;
}
			
